{
  "name": "OrderItem",
  "tableName": "order_items",
  "description": "Line items for orders",
  "columns": [
    {
      "name": "id",
      "type": "INTEGER",
      "primaryKey": true,
      "autoIncrement": true,
      "nullable": false
    },
    {
      "name": "order_id",
      "type": "INTEGER",
      "nullable": false,
      "foreignKey": {
        "entity": "Order",
        "column": "id",
        "onDelete": "CASCADE",
        "onUpdate": "CASCADE"
      }
    },
    {
      "name": "product_id",
      "type": "INTEGER",
      "nullable": false,
      "foreignKey": {
        "entity": "Product",
        "column": "id",
        "onDelete": "RESTRICT",
        "onUpdate": "CASCADE"
      }
    },
    {
      "name": "quantity",
      "type": "INTEGER",
      "nullable": false
    },
    {
      "name": "unit_price",
      "type": "DECIMAL(10,2)",
      "nullable": false
    },
    {
      "name": "subtotal",
      "type": "DECIMAL(10,2)",
      "nullable": false
    }
  ],
  "indexes": [
    {
      "name": "idx_order_id",
      "columns": ["order_id"]
    },
    {
      "name": "idx_product_id",
      "columns": ["product_id"]
    },
    {
      "name": "idx_order_product",
      "columns": ["order_id", "product_id"],
      "unique": true
    }
  ]
}
